<div class="container" ng-controller= "subject1">
  <h1 style="text-align: center"> Choose the categories </h1>
      <div class="form-group" style="width: 30%; margin: 25px auto">
  <form class= "form-group">
    <div >
    <select name="subject" id="subject" style = "margin-bottom: 15px" ng-model = "subject" ng-click='showClass()'>
      <option value="">--Select Subject--</option>
     <option ng-repeat="sub in subjectList" value="[[sub.subjectName]]">[[sub.subjectName]]</option>
   </select>
  </div>
    <select name="class" id="class" style = "margin-bottom: 15px" ng-model = "class" placeholder= "Class" ng-change='showBoard()' ng-show='class'>
     <option value="">--Select Class--</option>
     <option value="08">08</option>
     <option value="09">09</option>
     <option value="10">10</option>
     <option value="11">11</option>
     <option value="12">12</option>
   </select>
   <select name="board" id="board" ng-model = "board" ng-change='create()' ng-show = 'board'>
    <option value="">--Select Board--</option>
    <option value="CBSE">CBSE</option>
    <option value="ICSE">ICSE</option>
    <option value="JEEM">JEEMains</option>
    <option value="JEEA">JEEAdvanced</option>
    <option value="NEET">NEET</option>
  </select>
  <div>
    <select name="topic" id="topic" style = "margin-bottom: 15px" ng-model = "topic" ng-show= 'topic'>
      <option value="">--Select Topic--</option>
     <option ng-repeat="top in topicList.topic" value="[[top]]">[[top]]</option>
   </select>
 </div>
</div>
</div>

  </form>



<div class="container" ng-controller= "subject1">
  <h1 style="text-align: center"> Add a question </h1>
      <div class="form-group" style="width: 30%; margin: 25px auto">
  <form action="/question/add" method="POST" enctype="multipart/form-data">
    <div class="form-group">
      <input type="text" class="form-control" name="questionName" placeholder="Question">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" name="option1" placeholder="Option1">
      <input type="file" class="form-control" name="uploadImage" placeholder="Upload">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" name="option2" placeholder="Option2">
      <input type="file" class="form-control" name="uploadImage" placeholder="Upload">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" name="option3" placeholder="Option3">
      <input type="file" class="form-control" name="uploadImage" placeholder="Upload">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" name="option4" placeholder="Option4">
      <input type="file" class="form-control" name="uploadImage" placeholder="Upload">
    </div>
    <div>
    <select name="level" id="level">
     <option value="Beginner">Beginner</option>
     <option value="Amateur">Amateur</option>
     <option value="Advanced">Advanced</option>
     <option value="Expert">Expert</option>
    </select>
    </div>
    <div class="form-group">
      <input type="text" class="form-control" name="SID" placeholder="Subject">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" name="topic" placeholder="Topic">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" name="solution" placeholder="Solution">
      <input type="file" class="form-control" name="uploadImage" placeholder="Upload">
    </div>
    <div class="form-group">
      <input type="file" class="form-control" name="uploadImage" placeholder="Upload">
    </div>
    <div class="dropdown">

      <h6> AnswerKey: </h6>
      <input type="checkbox" name="answerKey1" value="A" /> A
      <input type="checkbox" name="answerKey2" value="B" /> B
      <input type="checkbox" name="answerKey3" value="C" /> C
      <input type="checkbox" name="answerKey4" value="D" /> D

    </div>
    <div class="form-group">
      <a href= "/question/add">
      <button type="submit"class="btn btn-primary btn-lg btn-block" ng-click= "add()"> Submit </button>
      </a>
    </div>
    <div class="form-group">
    </div>
    <a href= "/question/view"> Go back </a>
  </form>


    <script>

    app.controller("subject1", function($scope) {

      $.get("/api/v1/topic/all",function(data){
        console.log(data);
        $scope.topicList = data;
        $scope.$apply();
      });

      getSubjects();
      function getSubjects() {
        $.get("/api/v1/uniqueSubject/all",function(data){
          console.log(data);
          $scope.subjectList = data;
          $scope.$apply();
        });
      }
      $scope.class = false;
      $scope.board = false;
      $scope.topic = false;
      $scope.showClass= function(){
        $scope.class = true;
      }
      $scope.showBoard= function(){
        $scope.board = true;
      }

      $scope.create = function() {

        $scope.topic = true;
        var tempBoard = $scope.board;
        console.log(typeof(tempBoard));
        var boardInitials = tempBoard.substring(0,4);
        var temp = boardInitials.concat($scope.class);
        var temp2 = $scope.subject.substring(0,4).toUpperCase();
        var SID = temp.concat(temp2);
        console.log(SID);

        $.get("/api/v1/topic/mongo/" + SID ,function(data){
          console.log(data);
          $scope.topicList = data[0];
          $scope.$apply();
        });
        // $scope.add = function() {
        //   // console.log("!");
        //   var ques = {};
        //   ques.SID = $scope.SID;
        //   console.log(ques);
        //   // data.class = $scope.class;
        //   $.post("api/v1/question/add",ques, function(result){
        //     console.log("Added successfully");
        //   });
        // }
      }



    });

    </script>
